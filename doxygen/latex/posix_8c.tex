\hypertarget{posix_8c}{}\section{fatfs/posix.c File Reference}
\label{posix_8c}\index{fatfs/posix.\+c@{fatfs/posix.\+c}}


P\+Rovides hardware abstraction layer to M\+M\+C.\+C.  


{\ttfamily \#include $<$user\+\_\+config.\+h$>$}\\*
{\ttfamily \#include \char`\"{}ff.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}disk.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}diskio.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}posix.\+h\char`\"{}}\\*
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \hyperlink{posix_8c_a2c5eecb22513a88c24ae5831a3265e54}{M\+A\+X\+\_\+\+F\+I\+L\+ES}~16
\begin{DoxyCompactList}\small\item\em Maximum number or P\+O\+S\+IX file handels. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{user__config_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE} F\+I\+LE $\ast$ \hyperlink{posix_8c_a2c01fe0e0aa550b2a8b4dcc326983b57}{fileno\+\_\+to\+\_\+stream} (int \hyperlink{posix_8h_aceb657a1b3c10d576aed287714bfd5d1}{fileno})
\begin{DoxyCompactList}\small\item\em Convert P\+O\+S\+IX fileno to P\+O\+S\+IX F\+I\+LE stream pointer. \end{DoxyCompactList}\item 
\hyperlink{user__config_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE} int \hyperlink{posix_8c_aceb657a1b3c10d576aed287714bfd5d1}{fileno} (F\+I\+LE $\ast$stream)
\begin{DoxyCompactList}\small\item\em Convert P\+O\+S\+IX stream pointer to P\+O\+S\+IX fileno (index of \+\_\+\+\_\+iob\mbox{[}\mbox{]}) \end{DoxyCompactList}\item 
\hyperlink{user__config_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE} \hyperlink{structFIL}{F\+IL} $\ast$ \hyperlink{posix_8c_a9b859123258b36eb57f4f71d2606d8a5}{fileno\+\_\+to\+\_\+fatfs} (int \hyperlink{posix_8h_aceb657a1b3c10d576aed287714bfd5d1}{fileno})
\begin{DoxyCompactList}\small\item\em Convert P\+O\+S\+IX fileno to Fat\+FS handle. \end{DoxyCompactList}\item 
\hyperlink{user__config_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE} int \hyperlink{posix_8c_a81f14429660ca6a685676d6ceaf5350c}{fatfs\+\_\+to\+\_\+fileno} (\hyperlink{structFIL}{F\+IL} $\ast$fh)
\begin{DoxyCompactList}\small\item\em Convert Fat\+FS file handle to P\+O\+S\+IX fileno. \end{DoxyCompactList}\item 
\hyperlink{user__config_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE} int \hyperlink{posix_8c_abab788c42cce343cde2f5b8f90015229}{new\+\_\+file\+\_\+descriptor} (void)
\begin{DoxyCompactList}\small\item\em Allocate a P\+O\+S\+IX F\+I\+LE descriptor. \end{DoxyCompactList}\item 
\hyperlink{user__config_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE} int \hyperlink{posix_8c_a38496612f759733234128893e4c60a89}{free\+\_\+file\+\_\+descriptor} (int \hyperlink{posix_8h_aceb657a1b3c10d576aed287714bfd5d1}{fileno})
\begin{DoxyCompactList}\small\item\em Free P\+O\+S\+IX fileno F\+I\+LE descriptor. \end{DoxyCompactList}\item 
\hyperlink{user__config_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE} int \hyperlink{posix_8c_a31986cce890109c211ccb14151aafd0e}{isatty} (int \hyperlink{posix_8h_aceb657a1b3c10d576aed287714bfd5d1}{fileno})
\begin{DoxyCompactList}\small\item\em Test P\+O\+S\+IX fileno if it is a Serial Console/\+T\+TY. \end{DoxyCompactList}\item 
\hyperlink{user__config_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE} void \hyperlink{posix_8c_a4ce26afbb10890d31c53a8ff76d992e3}{perror} (const char $\ast$s)
\begin{DoxyCompactList}\small\item\em P\+O\+S\+IX \hyperlink{posix_8c_a4ce26afbb10890d31c53a8ff76d992e3}{perror()} -\/ convert P\+O\+S\+IX errno to text with user message. \end{DoxyCompactList}\item 
\hyperlink{user__config_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE} char $\ast$ \hyperlink{posix_8c_abf72a013f9f9c7d75ea029f1ed377361}{strerror} (int errnum)
\begin{DoxyCompactList}\small\item\em P\+O\+S\+IX \hyperlink{posix_8c_abf72a013f9f9c7d75ea029f1ed377361}{strerror()} -\/ convert P\+O\+S\+IX errno to text with user message. \end{DoxyCompactList}\item 
\hyperlink{user__config_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE} char $\ast$ \hyperlink{posix_8c_a6311c6b29216455ec9b716b9eb31c799}{strerror\+\_\+r} (int errnum, char $\ast$buf, size\+\_\+t buflen)
\begin{DoxyCompactList}\small\item\em P\+O\+S\+IX \hyperlink{posix_8c_a6311c6b29216455ec9b716b9eb31c799}{strerror\+\_\+r()} -\/ convert P\+O\+S\+IX errno to text with user message. \end{DoxyCompactList}\item 
\hyperlink{user__config_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE} int \hyperlink{posix_8c_ac20f0fc565c27bbbb900bde3337b09b9}{fatfs\+\_\+to\+\_\+errno} (\hyperlink{ff_8h_a49d0171ecbd362cda5680a0d360db44c}{F\+R\+E\+S\+U\+LT} Result)
\begin{DoxyCompactList}\small\item\em Convert Faf\+Fs error result to P\+O\+S\+IX errno. \end{DoxyCompactList}\item 
\hyperlink{user__config_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE} int \hyperlink{posix_8c_a607feb06d296e0ff60d5a19538bd17fc}{posix\+\_\+fopen\+\_\+modes\+\_\+to\+\_\+open} (const char $\ast$mode)
\begin{DoxyCompactList}\small\item\em Convert P\+O\+S\+IX fopen mode to P\+O\+S\+IX open mode flags. \end{DoxyCompactList}\item 
static \hyperlink{user__config_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE} int \hyperlink{posix_8c_a6a61d582ee213d204cecbf5c2cc4b7a9}{fatfs\+\_\+getc} (F\+I\+LE $\ast$stream)
\begin{DoxyCompactList}\small\item\em ================================================================== \end{DoxyCompactList}\item 
static \hyperlink{user__config_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE} int \hyperlink{posix_8c_a871226f966e7a8cbf2263fe0c65dd4a5}{fatfs\+\_\+putc} (char c, F\+I\+LE $\ast$stream)
\begin{DoxyCompactList}\small\item\em Private Fat\+Fs function called by fputc() to put a byte from file stream \hyperlink{posix_8c_a3e5e6f96d36b5cdacfaf6b3976cd5af2}{open()} assigns stream-\/$>$put = \hyperlink{posix_8c_a871226f966e7a8cbf2263fe0c65dd4a5}{fatfs\+\_\+putc()} \end{DoxyCompactList}\item 
\hyperlink{user__config_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE} int \hyperlink{posix_8c_a3e5e6f96d36b5cdacfaf6b3976cd5af2}{open} (const char $\ast$pathname, int flags)
\begin{DoxyCompactList}\small\item\em ================================================================== \end{DoxyCompactList}\item 
\hyperlink{user__config_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE} F\+I\+LE $\ast$ \hyperlink{posix_8c_a8e661c338f41695d1a1e70aed6255e2d}{fopen} (const char $\ast$path, const char $\ast$mode)
\begin{DoxyCompactList}\small\item\em P\+O\+S\+IX Open a file with path name and ascii file mode string. \end{DoxyCompactList}\item 
\hyperlink{user__config_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE} int \hyperlink{posix_8c_a48dc1df1627501d3faed4bf1f9801759}{close} (int \hyperlink{posix_8h_aceb657a1b3c10d576aed287714bfd5d1}{fileno})
\begin{DoxyCompactList}\small\item\em P\+O\+S\+IX Close a file with fileno handel. \end{DoxyCompactList}\item 
\hyperlink{user__config_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE} int \hyperlink{posix_8c_a521c33bdb3606c9f3546b9cbcd37b9ac}{syncfs} (int fd)
\begin{DoxyCompactList}\small\item\em P\+O\+S\+IX Sync pending file changes and metadata for specified fileno. \end{DoxyCompactList}\item 
\hyperlink{user__config_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE} void \hyperlink{posix_8c_a8f7f00d4ec0d99440762b0a664aebf70}{sync} (void)
\begin{DoxyCompactList}\small\item\em P\+O\+S\+IX Sync all pending file changes and metadata on A\+LL files. \end{DoxyCompactList}\item 
\hyperlink{user__config_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE} int \hyperlink{posix_8c_ad6fd240fec1d65213f34b6e6465a8033}{fclose} (F\+I\+LE $\ast$stream)
\begin{DoxyCompactList}\small\item\em P\+O\+S\+IX close a file stream. \end{DoxyCompactList}\item 
\hyperlink{user__config_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE} \hyperlink{posix_8h_a170745d0d946e79c4c2a056d1d158996}{ssize\+\_\+t} \hyperlink{posix_8c_a072435300ac99e8d7c3749f45166e797}{write} (int fd, const void $\ast$buf, size\+\_\+t \hyperlink{user__main_8c_aa011065eee776eb1bda73597b5d9d5d7}{count})
\begin{DoxyCompactList}\small\item\em P\+O\+S\+IX Write count bytes from $\ast$buf to fileno fd. \end{DoxyCompactList}\item 
\hyperlink{user__config_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE} size\+\_\+t \hyperlink{posix_8c_a148630cbecc0822d9395f002691ffe75}{fwrite} (const void $\ast$ptr, size\+\_\+t size, size\+\_\+t nmemb, F\+I\+LE $\ast$stream)
\begin{DoxyCompactList}\small\item\em P\+O\+S\+IX write nmemb elements from buf, size bytes each, to the stream fd. \end{DoxyCompactList}\item 
\hyperlink{user__config_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE} \hyperlink{posix_8h_a170745d0d946e79c4c2a056d1d158996}{ssize\+\_\+t} \hyperlink{posix_8c_af104a2c05bef787e54c6925616e867df}{read} (int fd, const void $\ast$buf, size\+\_\+t \hyperlink{user__main_8c_aa011065eee776eb1bda73597b5d9d5d7}{count})
\begin{DoxyCompactList}\small\item\em P\+O\+S\+IX read count bytes from $\ast$buf to fileno fd. \end{DoxyCompactList}\item 
\hyperlink{user__config_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE} size\+\_\+t \hyperlink{posix_8c_a01233ac8fd574e20b0b38472adbee551}{fread} (void $\ast$ptr, size\+\_\+t size, size\+\_\+t nmemb, F\+I\+LE $\ast$stream)
\begin{DoxyCompactList}\small\item\em P\+O\+S\+IX read nmemb elements from buf, size bytes each, to the stream fd. \end{DoxyCompactList}\item 
\hyperlink{user__config_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE} size\+\_\+t \hyperlink{posix_8c_ae4ea1b12797e3ba021a1af3cb4ba17bd}{lseek} (int \hyperlink{posix_8h_aceb657a1b3c10d576aed287714bfd5d1}{fileno}, size\+\_\+t position, int whence)
\begin{DoxyCompactList}\small\item\em P\+O\+S\+IX seek to file position. \end{DoxyCompactList}\item 
\hyperlink{user__config_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE} int \hyperlink{posix_8c_ad31144743f0014784193221563ca8dd2}{fseek} (F\+I\+LE $\ast$stream, long offset, int whence)
\begin{DoxyCompactList}\small\item\em P\+O\+S\+IX seek to file possition. \end{DoxyCompactList}\item 
\hyperlink{user__config_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE} long \hyperlink{posix_8c_af53dca187c78408fe2f1958c4eb88603}{ftell} (F\+I\+LE $\ast$stream)
\begin{DoxyCompactList}\small\item\em P\+O\+S\+IX file position of open stream. \end{DoxyCompactList}\item 
\hyperlink{user__config_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE} void \hyperlink{posix_8c_a35e6a58f44d4651951ecfeb97f369884}{rewind} (F\+I\+LE $\ast$stream)
\begin{DoxyCompactList}\small\item\em P\+O\+S\+IX rewind file to the beginning. \end{DoxyCompactList}\item 
\hyperlink{user__config_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE} int \hyperlink{posix_8c_acb9e5741c01183dfe3179d646b264e5b}{fgetpos} (F\+I\+LE $\ast$stream, size\+\_\+t $\ast$pos)
\begin{DoxyCompactList}\small\item\em P\+O\+S\+IX get position of file stream. \end{DoxyCompactList}\item 
\hyperlink{user__config_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE} int \hyperlink{posix_8c_a8705d74fe77c1b23824074ecd14be1c7}{fsetpos} (F\+I\+LE $\ast$stream, size\+\_\+t $\ast$pos)
\begin{DoxyCompactList}\small\item\em P\+O\+S\+IX set position of file stream. \end{DoxyCompactList}\item 
\hyperlink{user__config_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE} int \hyperlink{posix_8c_aa964d662c19b2021d9cfd0c71bc686bd}{unlink} (const char $\ast$pathname)
\begin{DoxyCompactList}\small\item\em P\+O\+S\+IX delete a file. \end{DoxyCompactList}\item 
\hyperlink{user__config_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE} int \hyperlink{posix_8c_a6080dee579486f132062435577b77d10}{rmdir} (const char $\ast$pathname)
\begin{DoxyCompactList}\small\item\em P\+O\+S\+IX delete a directory. \end{DoxyCompactList}\item 
\hyperlink{user__config_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE} \hyperlink{time_8h_a3346b04b0420b32ccf6b706551b70762}{time\+\_\+t} \hyperlink{posix_8c_a178d5d21b21c0f60d6ff8dfbbc0d86f5}{fat\+\_\+time\+\_\+to\+\_\+unix} (\hyperlink{send_8c_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t} date, \hyperlink{send_8c_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t} \hyperlink{time_8h_a32b1cbd925752f0cd61d202bbe204a69}{time})
\begin{DoxyCompactList}\small\item\em Convert Fat\+Fs file date and time to P\+O\+S\+IX epoch seconds. \end{DoxyCompactList}\item 
\hyperlink{user__config_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE} int \hyperlink{posix_8c_a474e4e6cac62ef12c66b8a597c14e5f6}{ftruncate} (int fd, \hyperlink{posix_8h_aac46e03c2018bada012333c31f41df12}{off\+\_\+t} length)
\begin{DoxyCompactList}\small\item\em P\+O\+S\+IX truncate open file to length. \end{DoxyCompactList}\item 
\hyperlink{user__config_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE} int \hyperlink{posix_8c_a73a95c4a93875be906e573c00b30c5ea}{truncate} (const char $\ast$path, \hyperlink{posix_8h_aac46e03c2018bada012333c31f41df12}{off\+\_\+t} length)
\begin{DoxyCompactList}\small\item\em P\+O\+S\+IX truncate named file to length. \end{DoxyCompactList}\item 
\hyperlink{user__config_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE} int \hyperlink{posix_8c_abef70bf7a4af8a1f4998db0035c51781}{stat} (char $\ast$name, struct \hyperlink{structstat}{stat} $\ast$buf)
\begin{DoxyCompactList}\small\item\em P\+O\+S\+IX stat -\/ get file status of named file. \end{DoxyCompactList}\item 
\hyperlink{user__config_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE} char $\ast$ \hyperlink{posix_8c_a39eea0b104438afa9ca0500c2e8d6887}{mctime} (\hyperlink{time_8h_a3346b04b0420b32ccf6b706551b70762}{time\+\_\+t} timev)
\begin{DoxyCompactList}\small\item\em Display Ascii formatted time from timev seconds. \end{DoxyCompactList}\item 
\hyperlink{user__config_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE} void \hyperlink{posix_8c_a111f2e6e6bc9f0a46210a323cab093c7}{dump\+\_\+stat} (struct \hyperlink{structstat}{stat} $\ast$sp)
\begin{DoxyCompactList}\small\item\em Display struct stat, from P\+O\+S\+IX stat(0 or \hyperlink{posix_8h_a85e86e70773c0a204346f965272bd364}{fstat()}, in A\+S\+C\+II. \end{DoxyCompactList}\item 
\hyperlink{user__config_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE} int \hyperlink{posix_8c_ada8cc8f9394cf54db8f338838a9fa7ce}{rename} (const char $\ast$oldpath, const char $\ast$newpath)
\begin{DoxyCompactList}\small\item\em P\+O\+S\+IX rename a file by name. \end{DoxyCompactList}\item 
\hyperlink{user__config_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE} int \hyperlink{posix_8c_a26a07a3db060ffc5659fe03495a29a1c}{dirname} (char $\ast$str)
\begin{DoxyCompactList}\small\item\em Return the index of the last \textquotesingle{}/\textquotesingle{} character. \end{DoxyCompactList}\item 
\hyperlink{user__config_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE} char $\ast$ \hyperlink{posix_8c_a4d3dfaf2f5a63e2e4eaa128477a9b5e7}{basename} (char $\ast$str)
\begin{DoxyCompactList}\small\item\em P\+O\+S\+IX Basename of filename. \end{DoxyCompactList}\item 
\hyperlink{user__config_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE} char $\ast$ \hyperlink{posix_8c_a0b33c90b99d00a8bd2595f254d1409e1}{baseext} (char $\ast$str)
\begin{DoxyCompactList}\small\item\em File extention of a file name. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
int \hyperlink{posix_8c_ad65a8842cc674e3ddf69355898c0ecbf}{errno}
\begin{DoxyCompactList}\small\item\em Note\+: fdevopen assigns stdin,stdout,stderr. \end{DoxyCompactList}\item 
F\+I\+LE $\ast$ \hyperlink{posix_8c_aae2f027325f7e73c3aa5e7dc990bd90d}{\+\_\+\+\_\+iob} \mbox{[}\hyperlink{posix_8h_a2c5eecb22513a88c24ae5831a3265e54}{M\+A\+X\+\_\+\+F\+I\+L\+ES}\mbox{]}
\begin{DoxyCompactList}\small\item\em P\+O\+S\+IX fileno to P\+O\+S\+IX F\+I\+LE stream table. \end{DoxyCompactList}\item 
const char $\ast$ \hyperlink{posix_8c_a76ebfe24a40210e5935998c1fa86d3a0}{sys\+\_\+errlist} \mbox{[}$\,$\mbox{]}
\begin{DoxyCompactList}\small\item\em P\+O\+S\+IX error messages for each errno value. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
P\+Rovides hardware abstraction layer to M\+M\+C.\+C. 

P\+O\+S\+IX wrapper for Fat\+FS.

\begin{DoxyParagraph}{Copyright \copyright{} 2015 Mike Gore, G\+PL License}

\end{DoxyParagraph}
\begin{DoxyParagraph}{You are free to use this code under the terms of G\+PL}
please retain a copy of this notice in any code you use it in.
\end{DoxyParagraph}
This is free software\+: you can redistribute it and/or modify it under the terms of the G\+NU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.

This software is distributed in the hope that it will be useful, but W\+I\+T\+H\+O\+UT A\+NY W\+A\+R\+R\+A\+N\+TY; without even the implied warranty of M\+E\+R\+C\+H\+A\+N\+T\+A\+B\+I\+L\+I\+TY or F\+I\+T\+N\+E\+SS F\+OR A P\+A\+R\+T\+I\+C\+U\+L\+AR P\+U\+R\+P\+O\+SE. See the G\+NU General Public License for more details.

You should have received a copy of the G\+NU General Public License along with this program. If not, see \href{http://www.gnu.org/licenses/}{\tt http\+://www.\+gnu.\+org/licenses/}.


\begin{DoxyItemize}
\item Provides many of the common Posix/linux functions
\begin{DoxyItemize}
\item fdevopen
\item isatty
\item perror
\item strerror
\item fgetc
\item fputc
\item open
\item fopen
\item close
\item syncfs
\item sync
\item fclose
\item write
\item fwrite
\item read
\item fread
\item lseek
\item fseek
\item ftell
\item rewind
\item fgetpos
\item fsetpos
\item unlink
\item rmdir
\item ftruncate
\item truncate
\item fstat
\item stat
\item rename
\end{DoxyItemize}
\end{DoxyItemize}

\begin{DoxyParagraph}{Copyright \copyright{} 2015 Mike Gore, G\+PL License}

\end{DoxyParagraph}
\begin{DoxyParagraph}{You are free to use this code under the terms of G\+PL}
please retain a copy of this notice in any code you use it in.
\end{DoxyParagraph}
This is free software\+: you can redistribute it and/or modify it under the terms of the G\+NU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.

This software is distributed in the hope that it will be useful, but W\+I\+T\+H\+O\+UT A\+NY W\+A\+R\+R\+A\+N\+TY; without even the implied warranty of M\+E\+R\+C\+H\+A\+N\+T\+A\+B\+I\+L\+I\+TY or F\+I\+T\+N\+E\+SS F\+OR A P\+A\+R\+T\+I\+C\+U\+L\+AR P\+U\+R\+P\+O\+SE. See the G\+NU General Public License for more details.

You should have received a copy of the G\+NU General Public License along with this program. If not, see \href{http://www.gnu.org/licenses/}{\tt http\+://www.\+gnu.\+org/licenses/}. 

\subsection{Macro Definition Documentation}
\index{posix.\+c@{posix.\+c}!M\+A\+X\+\_\+\+F\+I\+L\+ES@{M\+A\+X\+\_\+\+F\+I\+L\+ES}}
\index{M\+A\+X\+\_\+\+F\+I\+L\+ES@{M\+A\+X\+\_\+\+F\+I\+L\+ES}!posix.\+c@{posix.\+c}}
\subsubsection[{\texorpdfstring{M\+A\+X\+\_\+\+F\+I\+L\+ES}{MAX_FILES}}]{\setlength{\rightskip}{0pt plus 5cm}\#define M\+A\+X\+\_\+\+F\+I\+L\+ES~16}\hypertarget{posix_8c_a2c5eecb22513a88c24ae5831a3265e54}{}\label{posix_8c_a2c5eecb22513a88c24ae5831a3265e54}


Maximum number or P\+O\+S\+IX file handels. 



Definition at line 74 of file posix.\+c.



Referenced by fatfs\+\_\+to\+\_\+fileno(), fileno(), fileno\+\_\+to\+\_\+stream(), new\+\_\+file\+\_\+descriptor(), and sync().



\subsection{Function Documentation}
\index{posix.\+c@{posix.\+c}!baseext@{baseext}}
\index{baseext@{baseext}!posix.\+c@{posix.\+c}}
\subsubsection[{\texorpdfstring{baseext(char $\ast$str)}{baseext(char *str)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf M\+E\+M\+S\+P\+A\+CE} char$\ast$ baseext (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{str}
\end{DoxyParamCaption}
)}\hypertarget{posix_8c_a0b33c90b99d00a8bd2595f254d1409e1}{}\label{posix_8c_a0b33c90b99d00a8bd2595f254d1409e1}


File extention of a file name. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em str} & string to find extension in.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
pointer to basename extension. 
\end{DoxyReturn}


Definition at line 1774 of file posix.\+c.

\index{posix.\+c@{posix.\+c}!basename@{basename}}
\index{basename@{basename}!posix.\+c@{posix.\+c}}
\subsubsection[{\texorpdfstring{basename(char $\ast$str)}{basename(char *str)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf M\+E\+M\+S\+P\+A\+CE} char$\ast$ basename (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{str}
\end{DoxyParamCaption}
)}\hypertarget{posix_8c_a4d3dfaf2f5a63e2e4eaa128477a9b5e7}{}\label{posix_8c_a4d3dfaf2f5a63e2e4eaa128477a9b5e7}


P\+O\+S\+IX Basename of filename. 


\begin{DoxyItemize}
\item man page (3).
\end{DoxyItemize}


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em str} & string to find basename in.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
pointer to basename of string. 
\end{DoxyReturn}


Definition at line 1754 of file posix.\+c.



Referenced by Font\+Header\+Info(), and main().

\index{posix.\+c@{posix.\+c}!close@{close}}
\index{close@{close}!posix.\+c@{posix.\+c}}
\subsubsection[{\texorpdfstring{close(int fileno)}{close(int fileno)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf M\+E\+M\+S\+P\+A\+CE} int close (
\begin{DoxyParamCaption}
\item[{int}]{fileno}
\end{DoxyParamCaption}
)}\hypertarget{posix_8c_a48dc1df1627501d3faed4bf1f9801759}{}\label{posix_8c_a48dc1df1627501d3faed4bf1f9801759}


P\+O\+S\+IX Close a file with fileno handel. 


\begin{DoxyItemize}
\item man page close (2).
\end{DoxyItemize}


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em fileno} & fileno of file.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 on sucess. 

-\/1 on error with errno set. 
\end{DoxyReturn}


Definition at line 980 of file posix.\+c.



Referenced by fclose(), and send\+\_\+message().

\index{posix.\+c@{posix.\+c}!dirname@{dirname}}
\index{dirname@{dirname}!posix.\+c@{posix.\+c}}
\subsubsection[{\texorpdfstring{dirname(char $\ast$str)}{dirname(char *str)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf M\+E\+M\+S\+P\+A\+CE} int dirname (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{str}
\end{DoxyParamCaption}
)}\hypertarget{posix_8c_a26a07a3db060ffc5659fe03495a29a1c}{}\label{posix_8c_a26a07a3db060ffc5659fe03495a29a1c}


Return the index of the last \textquotesingle{}/\textquotesingle{} character. 


\begin{DoxyItemize}
\item Example\+: 
\begin{DoxyCode}
1 dir[0] = 0;
2 ret = dirname(path)
3 if(ret)
4  strncpy(dir,path,ret);
\end{DoxyCode}

\end{DoxyItemize}


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em str} & string to examine. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 if no directory part. 

index of last \textquotesingle{}/\textquotesingle{} character. 
\end{DoxyReturn}


Definition at line 1727 of file posix.\+c.

\index{posix.\+c@{posix.\+c}!dump\+\_\+stat@{dump\+\_\+stat}}
\index{dump\+\_\+stat@{dump\+\_\+stat}!posix.\+c@{posix.\+c}}
\subsubsection[{\texorpdfstring{dump\+\_\+stat(struct stat $\ast$sp)}{dump_stat(struct stat *sp)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf M\+E\+M\+S\+P\+A\+CE} void dump\+\_\+stat (
\begin{DoxyParamCaption}
\item[{struct {\bf stat} $\ast$}]{sp}
\end{DoxyParamCaption}
)}\hypertarget{posix_8c_a111f2e6e6bc9f0a46210a323cab093c7}{}\label{posix_8c_a111f2e6e6bc9f0a46210a323cab093c7}


Display struct stat, from P\+O\+S\+IX stat(0 or \hyperlink{posix_8h_a85e86e70773c0a204346f965272bd364}{fstat()}, in A\+S\+C\+II. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em sp} & struct stat pointer.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
void. 
\end{DoxyReturn}


Definition at line 1662 of file posix.\+c.



Referenced by mmc\+\_\+test().

\index{posix.\+c@{posix.\+c}!fat\+\_\+time\+\_\+to\+\_\+unix@{fat\+\_\+time\+\_\+to\+\_\+unix}}
\index{fat\+\_\+time\+\_\+to\+\_\+unix@{fat\+\_\+time\+\_\+to\+\_\+unix}!posix.\+c@{posix.\+c}}
\subsubsection[{\texorpdfstring{fat\+\_\+time\+\_\+to\+\_\+unix(uint16\+\_\+t date, uint16\+\_\+t time)}{fat_time_to_unix(uint16_t date, uint16_t time)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf M\+E\+M\+S\+P\+A\+CE} {\bf time\+\_\+t} fat\+\_\+time\+\_\+to\+\_\+unix (
\begin{DoxyParamCaption}
\item[{{\bf uint16\+\_\+t}}]{date, }
\item[{{\bf uint16\+\_\+t}}]{time}
\end{DoxyParamCaption}
)}\hypertarget{posix_8c_a178d5d21b21c0f60d6ff8dfbbc0d86f5}{}\label{posix_8c_a178d5d21b21c0f60d6ff8dfbbc0d86f5}


Convert Fat\+Fs file date and time to P\+O\+S\+IX epoch seconds. 


\begin{DoxyItemize}
\item man page timegm (3).
\end{DoxyItemize}


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em date} & Fat\+Fs date. \\
\hline
\mbox{\tt in}  & {\em time} & Fat\+Fs time.\\
\hline
\end{DoxyParams}
\begin{DoxySeeAlso}{See also}
\hyperlink{time_8c_a8386ff819a39512ea00cfc78ce5a27d5}{timegm()}
\end{DoxySeeAlso}
\begin{DoxyReturn}{Returns}
epoch seconds 
\end{DoxyReturn}


Definition at line 1448 of file posix.\+c.



Referenced by stat().

\index{posix.\+c@{posix.\+c}!fatfs\+\_\+getc@{fatfs\+\_\+getc}}
\index{fatfs\+\_\+getc@{fatfs\+\_\+getc}!posix.\+c@{posix.\+c}}
\subsubsection[{\texorpdfstring{fatfs\+\_\+getc(\+F\+I\+L\+E $\ast$stream)}{fatfs_getc(FILE *stream)}}]{\setlength{\rightskip}{0pt plus 5cm}static {\bf M\+E\+M\+S\+P\+A\+CE} int fatfs\+\_\+getc (
\begin{DoxyParamCaption}
\item[{F\+I\+LE $\ast$}]{stream}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\hypertarget{posix_8c_a6a61d582ee213d204cecbf5c2cc4b7a9}{}\label{posix_8c_a6a61d582ee213d204cecbf5c2cc4b7a9}


================================================================== 

Private Fat\+Fs function called by fgetc() to get a byte from file stream \hyperlink{posix_8c_a3e5e6f96d36b5cdacfaf6b3976cd5af2}{open()} assigns stream-\/$>$get = \hyperlink{posix_8c_a6a61d582ee213d204cecbf5c2cc4b7a9}{fatfs\+\_\+getc()}


\begin{DoxyItemize}
\item man page fgetc (3).
\item Notes\+: fgetc does all tests prior to caling us, including ungetc.
\end{DoxyItemize}


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em stream} & P\+O\+S\+IX stream pointer.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
character. 

E\+OF on error with errno set. 
\end{DoxyReturn}


Definition at line 658 of file posix.\+c.



Referenced by open().

\index{posix.\+c@{posix.\+c}!fatfs\+\_\+putc@{fatfs\+\_\+putc}}
\index{fatfs\+\_\+putc@{fatfs\+\_\+putc}!posix.\+c@{posix.\+c}}
\subsubsection[{\texorpdfstring{fatfs\+\_\+putc(char c, F\+I\+L\+E $\ast$stream)}{fatfs_putc(char c, FILE *stream)}}]{\setlength{\rightskip}{0pt plus 5cm}static {\bf M\+E\+M\+S\+P\+A\+CE} int fatfs\+\_\+putc (
\begin{DoxyParamCaption}
\item[{char}]{c, }
\item[{F\+I\+LE $\ast$}]{stream}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\hypertarget{posix_8c_a871226f966e7a8cbf2263fe0c65dd4a5}{}\label{posix_8c_a871226f966e7a8cbf2263fe0c65dd4a5}


Private Fat\+Fs function called by fputc() to put a byte from file stream \hyperlink{posix_8c_a3e5e6f96d36b5cdacfaf6b3976cd5af2}{open()} assigns stream-\/$>$put = \hyperlink{posix_8c_a871226f966e7a8cbf2263fe0c65dd4a5}{fatfs\+\_\+putc()} 


\begin{DoxyItemize}
\item man page fputc (3).
\item Notes\+: fputc does all tests prior to caling us.
\end{DoxyItemize}


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em c} & character. \\
\hline
\mbox{\tt in}  & {\em stream} & P\+O\+S\+IX stream pointer.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
character 

E\+OF on error with errno set. 
\end{DoxyReturn}


Definition at line 703 of file posix.\+c.



Referenced by open().

\index{posix.\+c@{posix.\+c}!fatfs\+\_\+to\+\_\+errno@{fatfs\+\_\+to\+\_\+errno}}
\index{fatfs\+\_\+to\+\_\+errno@{fatfs\+\_\+to\+\_\+errno}!posix.\+c@{posix.\+c}}
\subsubsection[{\texorpdfstring{fatfs\+\_\+to\+\_\+errno(\+F\+R\+E\+S\+U\+L\+T Result)}{fatfs_to_errno(FRESULT Result)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf M\+E\+M\+S\+P\+A\+CE} int fatfs\+\_\+to\+\_\+errno (
\begin{DoxyParamCaption}
\item[{{\bf F\+R\+E\+S\+U\+LT}}]{Result}
\end{DoxyParamCaption}
)}\hypertarget{posix_8c_ac20f0fc565c27bbbb900bde3337b09b9}{}\label{posix_8c_ac20f0fc565c27bbbb900bde3337b09b9}


Convert Faf\+Fs error result to P\+O\+S\+IX errno. 


\begin{DoxyItemize}
\item man page errno (3).
\end{DoxyItemize}


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em Result} & Fat\+Fs Result code.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
P\+O\+S\+IX errno. 

E\+B\+A\+D\+M\+SG if no conversion possible. 
\end{DoxyReturn}


Definition at line 511 of file posix.\+c.



Referenced by close(), fatfs\+\_\+getc(), fatfs\+\_\+putc(), ftruncate(), lseek(), open(), read(), rename(), rmdir(), stat(), syncfs(), truncate(), unlink(), and write().

\index{posix.\+c@{posix.\+c}!fatfs\+\_\+to\+\_\+fileno@{fatfs\+\_\+to\+\_\+fileno}}
\index{fatfs\+\_\+to\+\_\+fileno@{fatfs\+\_\+to\+\_\+fileno}!posix.\+c@{posix.\+c}}
\subsubsection[{\texorpdfstring{fatfs\+\_\+to\+\_\+fileno(\+F\+I\+L $\ast$fh)}{fatfs_to_fileno(FIL *fh)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf M\+E\+M\+S\+P\+A\+CE} int fatfs\+\_\+to\+\_\+fileno (
\begin{DoxyParamCaption}
\item[{{\bf F\+IL} $\ast$}]{fh}
\end{DoxyParamCaption}
)}\hypertarget{posix_8c_a81f14429660ca6a685676d6ceaf5350c}{}\label{posix_8c_a81f14429660ca6a685676d6ceaf5350c}


Convert Fat\+FS file handle to P\+O\+S\+IX fileno. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em fh} & Fat\+FS file pointer.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
fileno on success. 

-\/1 on error with errno set to E\+B\+A\+DF. 
\end{DoxyReturn}


Definition at line 228 of file posix.\+c.

\index{posix.\+c@{posix.\+c}!fclose@{fclose}}
\index{fclose@{fclose}!posix.\+c@{posix.\+c}}
\subsubsection[{\texorpdfstring{fclose(\+F\+I\+L\+E $\ast$stream)}{fclose(FILE *stream)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf M\+E\+M\+S\+P\+A\+CE} int fclose (
\begin{DoxyParamCaption}
\item[{F\+I\+LE $\ast$}]{stream}
\end{DoxyParamCaption}
)}\hypertarget{posix_8c_ad6fd240fec1d65213f34b6e6465a8033}{}\label{posix_8c_ad6fd240fec1d65213f34b6e6465a8033}


P\+O\+S\+IX close a file stream. 


\begin{DoxyItemize}
\item man page flose (3).
\end{DoxyItemize}


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em stream} & P\+O\+S\+IX stream pointer. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 on sucess. 

-\/1 on error witrh errno set. 
\end{DoxyReturn}


Definition at line 1086 of file posix.\+c.



Referenced by main(), and Read\+Bdf().

\index{posix.\+c@{posix.\+c}!fgetpos@{fgetpos}}
\index{fgetpos@{fgetpos}!posix.\+c@{posix.\+c}}
\subsubsection[{\texorpdfstring{fgetpos(\+F\+I\+L\+E $\ast$stream, size\+\_\+t $\ast$pos)}{fgetpos(FILE *stream, size_t *pos)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf M\+E\+M\+S\+P\+A\+CE} int fgetpos (
\begin{DoxyParamCaption}
\item[{F\+I\+LE $\ast$}]{stream, }
\item[{size\+\_\+t $\ast$}]{pos}
\end{DoxyParamCaption}
)}\hypertarget{posix_8c_acb9e5741c01183dfe3179d646b264e5b}{}\label{posix_8c_acb9e5741c01183dfe3179d646b264e5b}


P\+O\+S\+IX get position of file stream. 


\begin{DoxyItemize}
\item man page fgetpos (3).
\end{DoxyItemize}


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em stream} & P\+O\+S\+IX file stream. \\
\hline
\mbox{\tt in}  & {\em pos} & position pointer for return.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 on sucess. 

-\/1 on error with errno set. 
\end{DoxyReturn}


Definition at line 1366 of file posix.\+c.

\index{posix.\+c@{posix.\+c}!fileno@{fileno}}
\index{fileno@{fileno}!posix.\+c@{posix.\+c}}
\subsubsection[{\texorpdfstring{fileno(\+F\+I\+L\+E $\ast$stream)}{fileno(FILE *stream)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf M\+E\+M\+S\+P\+A\+CE} int fileno (
\begin{DoxyParamCaption}
\item[{F\+I\+LE $\ast$}]{stream}
\end{DoxyParamCaption}
)}\hypertarget{posix_8c_aceb657a1b3c10d576aed287714bfd5d1}{}\label{posix_8c_aceb657a1b3c10d576aed287714bfd5d1}


Convert P\+O\+S\+IX stream pointer to P\+O\+S\+IX fileno (index of \+\_\+\+\_\+iob\mbox{[}\mbox{]}) 


\begin{DoxyItemize}
\item man page fileno (3) 
\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em stream} & stream pointer\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
int fileno on success 

-\/1 with errno = E\+B\+A\+FD if stream is N\+U\+LL or not found 
\end{DoxyReturn}

\end{DoxyItemize}

Definition at line 167 of file posix.\+c.



Referenced by fclose(), fileno(), fileno\+\_\+to\+\_\+stream(), fopen(), fread(), free\+\_\+file\+\_\+descriptor(), fseek(), ftell(), fwrite(), open(), and truncate().

\index{posix.\+c@{posix.\+c}!fileno\+\_\+to\+\_\+fatfs@{fileno\+\_\+to\+\_\+fatfs}}
\index{fileno\+\_\+to\+\_\+fatfs@{fileno\+\_\+to\+\_\+fatfs}!posix.\+c@{posix.\+c}}
\subsubsection[{\texorpdfstring{fileno\+\_\+to\+\_\+fatfs(int fileno)}{fileno_to_fatfs(int fileno)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf M\+E\+M\+S\+P\+A\+CE} {\bf F\+IL}$\ast$ fileno\+\_\+to\+\_\+fatfs (
\begin{DoxyParamCaption}
\item[{int}]{fileno}
\end{DoxyParamCaption}
)}\hypertarget{posix_8c_a9b859123258b36eb57f4f71d2606d8a5}{}\label{posix_8c_a9b859123258b36eb57f4f71d2606d8a5}


Convert P\+O\+S\+IX fileno to Fat\+FS handle. 


\begin{DoxyItemize}
\item Fat\+FS file handle is pointed to by the avr-\/libc stream-\/$>$udata.
\end{DoxyItemize}


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em fileno} & fileno of file\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
\hyperlink{structFIL}{F\+IL} $\ast$ Fat\+FS file handle on success. 

N\+U\+LL if P\+O\+S\+IX fileno is invalid N\+U\+LL 
\end{DoxyReturn}


Definition at line 195 of file posix.\+c.



Referenced by close(), ftell(), ftruncate(), lseek(), open(), read(), sync(), syncfs(), truncate(), and write().

\index{posix.\+c@{posix.\+c}!fileno\+\_\+to\+\_\+stream@{fileno\+\_\+to\+\_\+stream}}
\index{fileno\+\_\+to\+\_\+stream@{fileno\+\_\+to\+\_\+stream}!posix.\+c@{posix.\+c}}
\subsubsection[{\texorpdfstring{fileno\+\_\+to\+\_\+stream(int fileno)}{fileno_to_stream(int fileno)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf M\+E\+M\+S\+P\+A\+CE} F\+I\+LE$\ast$ fileno\+\_\+to\+\_\+stream (
\begin{DoxyParamCaption}
\item[{int}]{fileno}
\end{DoxyParamCaption}
)}\hypertarget{posix_8c_a2c01fe0e0aa550b2a8b4dcc326983b57}{}\label{posix_8c_a2c01fe0e0aa550b2a8b4dcc326983b57}


Convert P\+O\+S\+IX fileno to P\+O\+S\+IX F\+I\+LE stream pointer. 


\begin{DoxyItemize}
\item inverse of P\+O\+S\+IX \hyperlink{posix_8c_aceb657a1b3c10d576aed287714bfd5d1}{fileno()}
\item man page fileno (3)
\end{DoxyItemize}


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em fileno} & P\+O\+S\+IX fileno is the index of \+\_\+\+\_\+iob\mbox{[}\mbox{]}.\\
\hline
\end{DoxyParams}
\begin{DoxySeeAlso}{See also}
\hyperlink{posix_8c_aceb657a1b3c10d576aed287714bfd5d1}{fileno()} 
\end{DoxySeeAlso}
\begin{DoxyReturn}{Returns}
F\+I\+LE $\ast$ on success 

N\+U\+LL on error with errno set, N\+U\+LL if fileno out of bounds 
\end{DoxyReturn}


Definition at line 140 of file posix.\+c.



Referenced by close(), fileno\+\_\+to\+\_\+fatfs(), fopen(), free\+\_\+file\+\_\+descriptor(), and open().

\index{posix.\+c@{posix.\+c}!fopen@{fopen}}
\index{fopen@{fopen}!posix.\+c@{posix.\+c}}
\subsubsection[{\texorpdfstring{fopen(const char $\ast$path, const char $\ast$mode)}{fopen(const char *path, const char *mode)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf M\+E\+M\+S\+P\+A\+CE} F\+I\+LE$\ast$ fopen (
\begin{DoxyParamCaption}
\item[{const char $\ast$}]{path, }
\item[{const char $\ast$}]{mode}
\end{DoxyParamCaption}
)}\hypertarget{posix_8c_a8e661c338f41695d1a1e70aed6255e2d}{}\label{posix_8c_a8e661c338f41695d1a1e70aed6255e2d}


P\+O\+S\+IX Open a file with path name and ascii file mode string. 


\begin{DoxyItemize}
\item man page fopen(3).
\end{DoxyItemize}


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em path} & filename string. \\
\hline
\mbox{\tt in}  & {\em mode} & P\+O\+S\+IX open mode strings.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
stream $\ast$ on success. 

N\+U\+LL on error with errno set. 
\end{DoxyReturn}


Definition at line 961 of file posix.\+c.



Referenced by main(), and Read\+Bdf().

\index{posix.\+c@{posix.\+c}!fread@{fread}}
\index{fread@{fread}!posix.\+c@{posix.\+c}}
\subsubsection[{\texorpdfstring{fread(void $\ast$ptr, size\+\_\+t size, size\+\_\+t nmemb, F\+I\+L\+E $\ast$stream)}{fread(void *ptr, size_t size, size_t nmemb, FILE *stream)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf M\+E\+M\+S\+P\+A\+CE} size\+\_\+t fread (
\begin{DoxyParamCaption}
\item[{void $\ast$}]{ptr, }
\item[{size\+\_\+t}]{size, }
\item[{size\+\_\+t}]{nmemb, }
\item[{F\+I\+LE $\ast$}]{stream}
\end{DoxyParamCaption}
)}\hypertarget{posix_8c_a01233ac8fd574e20b0b38472adbee551}{}\label{posix_8c_a01233ac8fd574e20b0b38472adbee551}


P\+O\+S\+IX read nmemb elements from buf, size bytes each, to the stream fd. 


\begin{DoxyItemize}
\item man page fread (3).
\end{DoxyItemize}


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em ptr} & buffer. \\
\hline
\mbox{\tt in}  & {\em nmemb} & number of items to read. \\
\hline
\mbox{\tt in}  & {\em size} & size of each item in bytes. \\
\hline
\mbox{\tt in}  & {\em stream} & P\+O\+S\+IX file stream.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
count on sucess. 

0 or $<$ size on error with errno set. 
\end{DoxyReturn}


Definition at line 1227 of file posix.\+c.



Referenced by main().

\index{posix.\+c@{posix.\+c}!free\+\_\+file\+\_\+descriptor@{free\+\_\+file\+\_\+descriptor}}
\index{free\+\_\+file\+\_\+descriptor@{free\+\_\+file\+\_\+descriptor}!posix.\+c@{posix.\+c}}
\subsubsection[{\texorpdfstring{free\+\_\+file\+\_\+descriptor(int fileno)}{free_file_descriptor(int fileno)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf M\+E\+M\+S\+P\+A\+CE} int free\+\_\+file\+\_\+descriptor (
\begin{DoxyParamCaption}
\item[{int}]{fileno}
\end{DoxyParamCaption}
)}\hypertarget{posix_8c_a38496612f759733234128893e4c60a89}{}\label{posix_8c_a38496612f759733234128893e4c60a89}


Free P\+O\+S\+IX fileno F\+I\+LE descriptor. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em fileno} & P\+O\+S\+IX file number \+\_\+\+\_\+iob\mbox{[}\mbox{]} index.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
fileno on success. 

-\/1 on failure. 
\end{DoxyReturn}


Definition at line 390 of file posix.\+c.



Referenced by close(), and open().

\index{posix.\+c@{posix.\+c}!fseek@{fseek}}
\index{fseek@{fseek}!posix.\+c@{posix.\+c}}
\subsubsection[{\texorpdfstring{fseek(\+F\+I\+L\+E $\ast$stream, long offset, int whence)}{fseek(FILE *stream, long offset, int whence)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf M\+E\+M\+S\+P\+A\+CE} int fseek (
\begin{DoxyParamCaption}
\item[{F\+I\+LE $\ast$}]{stream, }
\item[{long}]{offset, }
\item[{int}]{whence}
\end{DoxyParamCaption}
)}\hypertarget{posix_8c_ad31144743f0014784193221563ca8dd2}{}\label{posix_8c_ad31144743f0014784193221563ca8dd2}


P\+O\+S\+IX seek to file possition. 


\begin{DoxyItemize}
\item man page fseek (3).
\end{DoxyItemize}


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em stream} & P\+O\+S\+IX file stream. \\
\hline
\mbox{\tt in}  & {\em offset} & offset to seek to. \\
\hline
\mbox{\tt in}  & {\em whence} & 
\begin{DoxyItemize}
\item S\+E\+E\+K\+\_\+\+S\+ET The offset is set to offset bytes.
\item S\+E\+E\+K\+\_\+\+C\+UR The offset is set to its current location plus offset bytes.
\item S\+E\+E\+K\+\_\+\+E\+ND The offset is set to the size of the file plus offset bytes.
\end{DoxyItemize}\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
file position on sucess. 

-\/1 on error. 
\end{DoxyReturn}


Definition at line 1299 of file posix.\+c.



Referenced by fsetpos(), and rewind().

\index{posix.\+c@{posix.\+c}!fsetpos@{fsetpos}}
\index{fsetpos@{fsetpos}!posix.\+c@{posix.\+c}}
\subsubsection[{\texorpdfstring{fsetpos(\+F\+I\+L\+E $\ast$stream, size\+\_\+t $\ast$pos)}{fsetpos(FILE *stream, size_t *pos)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf M\+E\+M\+S\+P\+A\+CE} int fsetpos (
\begin{DoxyParamCaption}
\item[{F\+I\+LE $\ast$}]{stream, }
\item[{size\+\_\+t $\ast$}]{pos}
\end{DoxyParamCaption}
)}\hypertarget{posix_8c_a8705d74fe77c1b23824074ecd14be1c7}{}\label{posix_8c_a8705d74fe77c1b23824074ecd14be1c7}


P\+O\+S\+IX set position of file stream. 


\begin{DoxyItemize}
\item man page fsetpos (3).
\end{DoxyItemize}


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em stream} & P\+O\+S\+IX file stream. \\
\hline
\mbox{\tt in}  & {\em pos} & position pointer.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 with $\ast$pos set to position on sucess. 

-\/1 on error with errno set. 
\end{DoxyReturn}


Definition at line 1386 of file posix.\+c.

\index{posix.\+c@{posix.\+c}!ftell@{ftell}}
\index{ftell@{ftell}!posix.\+c@{posix.\+c}}
\subsubsection[{\texorpdfstring{ftell(\+F\+I\+L\+E $\ast$stream)}{ftell(FILE *stream)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf M\+E\+M\+S\+P\+A\+CE} long ftell (
\begin{DoxyParamCaption}
\item[{F\+I\+LE $\ast$}]{stream}
\end{DoxyParamCaption}
)}\hypertarget{posix_8c_af53dca187c78408fe2f1958c4eb88603}{}\label{posix_8c_af53dca187c78408fe2f1958c4eb88603}


P\+O\+S\+IX file position of open stream. 


\begin{DoxyItemize}
\item man page fteel (3).
\end{DoxyItemize}


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em stream} & P\+O\+S\+IX file stream.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
file position on sucess. 

-\/1 on error with errno set. 
\end{DoxyReturn}


Definition at line 1325 of file posix.\+c.



Referenced by fgetpos().

\index{posix.\+c@{posix.\+c}!ftruncate@{ftruncate}}
\index{ftruncate@{ftruncate}!posix.\+c@{posix.\+c}}
\subsubsection[{\texorpdfstring{ftruncate(int fd, off\+\_\+t length)}{ftruncate(int fd, off_t length)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf M\+E\+M\+S\+P\+A\+CE} int ftruncate (
\begin{DoxyParamCaption}
\item[{int}]{fd, }
\item[{{\bf off\+\_\+t}}]{length}
\end{DoxyParamCaption}
)}\hypertarget{posix_8c_a474e4e6cac62ef12c66b8a597c14e5f6}{}\label{posix_8c_a474e4e6cac62ef12c66b8a597c14e5f6}


P\+O\+S\+IX truncate open file to length. 


\begin{DoxyItemize}
\item man page ftruncate (3).
\end{DoxyItemize}


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em fd} & open file number. \\
\hline
\mbox{\tt in}  & {\em length} & length to truncate to.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 on success. 

-\/1 on fail. 
\end{DoxyReturn}


Definition at line 1476 of file posix.\+c.

\index{posix.\+c@{posix.\+c}!fwrite@{fwrite}}
\index{fwrite@{fwrite}!posix.\+c@{posix.\+c}}
\subsubsection[{\texorpdfstring{fwrite(const void $\ast$ptr, size\+\_\+t size, size\+\_\+t nmemb, F\+I\+L\+E $\ast$stream)}{fwrite(const void *ptr, size_t size, size_t nmemb, FILE *stream)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf M\+E\+M\+S\+P\+A\+CE} size\+\_\+t fwrite (
\begin{DoxyParamCaption}
\item[{const void $\ast$}]{ptr, }
\item[{size\+\_\+t}]{size, }
\item[{size\+\_\+t}]{nmemb, }
\item[{F\+I\+LE $\ast$}]{stream}
\end{DoxyParamCaption}
)}\hypertarget{posix_8c_a148630cbecc0822d9395f002691ffe75}{}\label{posix_8c_a148630cbecc0822d9395f002691ffe75}


P\+O\+S\+IX write nmemb elements from buf, size bytes each, to the stream fd. 


\begin{DoxyItemize}
\item man page write (2).
\end{DoxyItemize}


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em ptr} & buffer. \\
\hline
\mbox{\tt in}  & {\em nmemb} & number of items to write. \\
\hline
\mbox{\tt in}  & {\em size} & size of each item in bytes. \\
\hline
\mbox{\tt in}  & {\em stream} & P\+O\+S\+IX file stream.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
count written on sucess. 

0 or $<$ size on error with errno set. 
\end{DoxyReturn}


Definition at line 1152 of file posix.\+c.



Referenced by main().

\index{posix.\+c@{posix.\+c}!isatty@{isatty}}
\index{isatty@{isatty}!posix.\+c@{posix.\+c}}
\subsubsection[{\texorpdfstring{isatty(int fileno)}{isatty(int fileno)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf M\+E\+M\+S\+P\+A\+CE} int isatty (
\begin{DoxyParamCaption}
\item[{int}]{fileno}
\end{DoxyParamCaption}
)}\hypertarget{posix_8c_a31986cce890109c211ccb14151aafd0e}{}\label{posix_8c_a31986cce890109c211ccb14151aafd0e}


Test P\+O\+S\+IX fileno if it is a Serial Console/\+T\+TY. 


\begin{DoxyItemize}
\item man page isatty (3).
\end{DoxyItemize}


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em fileno} & P\+O\+S\+IX fileno of open file.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
1 if fileno is a serial T\+T\+Y/\+Console (uart in avr-\/libc terms). 

0 if P\+O\+S\+IX fileno is N\+OT a Serial T\+TY. 
\end{DoxyReturn}
\begin{DoxyRefDesc}{Todo}
\item[\hyperlink{todo__todo000003}{Todo}]Perhaps we should verify console functions have been added ? \end{DoxyRefDesc}


Definition at line 435 of file posix.\+c.



Referenced by fileno\+\_\+to\+\_\+fatfs(), free\+\_\+file\+\_\+descriptor(), new\+\_\+file\+\_\+descriptor(), sync(), and syncfs().

\index{posix.\+c@{posix.\+c}!lseek@{lseek}}
\index{lseek@{lseek}!posix.\+c@{posix.\+c}}
\subsubsection[{\texorpdfstring{lseek(int fileno, size\+\_\+t position, int whence)}{lseek(int fileno, size_t position, int whence)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf M\+E\+M\+S\+P\+A\+CE} size\+\_\+t lseek (
\begin{DoxyParamCaption}
\item[{int}]{fileno, }
\item[{size\+\_\+t}]{position, }
\item[{int}]{whence}
\end{DoxyParamCaption}
)}\hypertarget{posix_8c_ae4ea1b12797e3ba021a1af3cb4ba17bd}{}\label{posix_8c_ae4ea1b12797e3ba021a1af3cb4ba17bd}


P\+O\+S\+IX seek to file position. 


\begin{DoxyItemize}
\item man page lseek (2).
\end{DoxyItemize}


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em fileno} & P\+O\+S\+IX fileno of open file. \\
\hline
\mbox{\tt in}  & {\em position} & offset to seek to. \\
\hline
\mbox{\tt in}  & {\em whence} & 
\begin{DoxyItemize}
\item S\+E\+E\+K\+\_\+\+S\+ET The offset is set to offset bytes.
\item S\+E\+E\+K\+\_\+\+C\+UR The offset is set to its current location plus offset bytes.
\item S\+E\+E\+K\+\_\+\+E\+ND The offset is set to the size of the file plus offset bytes.
\end{DoxyItemize}\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
file position on sucess. 

-\/1 on error. 
\end{DoxyReturn}


Definition at line 1256 of file posix.\+c.



Referenced by fseek().

\index{posix.\+c@{posix.\+c}!mctime@{mctime}}
\index{mctime@{mctime}!posix.\+c@{posix.\+c}}
\subsubsection[{\texorpdfstring{mctime(time\+\_\+t timev)}{mctime(time_t timev)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf M\+E\+M\+S\+P\+A\+CE} char$\ast$ mctime (
\begin{DoxyParamCaption}
\item[{{\bf time\+\_\+t}}]{timev}
\end{DoxyParamCaption}
)}\hypertarget{posix_8c_a39eea0b104438afa9ca0500c2e8d6887}{}\label{posix_8c_a39eea0b104438afa9ca0500c2e8d6887}


Display Ascii formatted time from timev seconds. 


\begin{DoxyItemize}
\item Assumes no timezone offset.
\item man page ctime (3).
\end{DoxyItemize}


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em timev} & epoch time in seconds \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
ascii string pointer of P\+O\+S\+IX \hyperlink{time_8c_a77d6bba12950028852621634ffaf4835}{ctime()} 
\end{DoxyReturn}
\begin{DoxySeeAlso}{See also}
\hyperlink{time_8c_a77d6bba12950028852621634ffaf4835}{ctime()} 
\end{DoxySeeAlso}


Definition at line 1644 of file posix.\+c.



Referenced by dump\+\_\+stat().

\index{posix.\+c@{posix.\+c}!new\+\_\+file\+\_\+descriptor@{new\+\_\+file\+\_\+descriptor}}
\index{new\+\_\+file\+\_\+descriptor@{new\+\_\+file\+\_\+descriptor}!posix.\+c@{posix.\+c}}
\subsubsection[{\texorpdfstring{new\+\_\+file\+\_\+descriptor(void)}{new_file_descriptor(void)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf M\+E\+M\+S\+P\+A\+CE} int new\+\_\+file\+\_\+descriptor (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}\hypertarget{posix_8c_abab788c42cce343cde2f5b8f90015229}{}\label{posix_8c_abab788c42cce343cde2f5b8f90015229}


Allocate a P\+O\+S\+IX F\+I\+LE descriptor. 

\begin{DoxyReturn}{Returns}
fileno on success. 

-\/1 on failure with errno set. 
\end{DoxyReturn}


Definition at line 303 of file posix.\+c.



Referenced by open().

\index{posix.\+c@{posix.\+c}!open@{open}}
\index{open@{open}!posix.\+c@{posix.\+c}}
\subsubsection[{\texorpdfstring{open(const char $\ast$pathname, int flags)}{open(const char *pathname, int flags)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf M\+E\+M\+S\+P\+A\+CE} int open (
\begin{DoxyParamCaption}
\item[{const char $\ast$}]{pathname, }
\item[{int}]{flags}
\end{DoxyParamCaption}
)}\hypertarget{posix_8c_a3e5e6f96d36b5cdacfaf6b3976cd5af2}{}\label{posix_8c_a3e5e6f96d36b5cdacfaf6b3976cd5af2}


================================================================== 

================================================================== P\+O\+S\+IX Open a file with integer mode flags.


\begin{DoxyItemize}
\item man page open (2).
\end{DoxyItemize}


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em pathname} & filename string. \\
\hline
\mbox{\tt in}  & {\em flags} & P\+O\+S\+IX open modes.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
fileno on success. 

-\/1 on error with errno set. 
\end{DoxyReturn}
Seek to end of the file 

Definition at line 853 of file posix.\+c.



Referenced by fopen().

\index{posix.\+c@{posix.\+c}!perror@{perror}}
\index{perror@{perror}!posix.\+c@{posix.\+c}}
\subsubsection[{\texorpdfstring{perror(const char $\ast$s)}{perror(const char *s)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf M\+E\+M\+S\+P\+A\+CE} void perror (
\begin{DoxyParamCaption}
\item[{const char $\ast$}]{s}
\end{DoxyParamCaption}
)}\hypertarget{posix_8c_a4ce26afbb10890d31c53a8ff76d992e3}{}\label{posix_8c_a4ce26afbb10890d31c53a8ff76d992e3}


P\+O\+S\+IX \hyperlink{posix_8c_a4ce26afbb10890d31c53a8ff76d992e3}{perror()} -\/ convert P\+O\+S\+IX errno to text with user message. 


\begin{DoxyItemize}
\item man page errno (3).
\end{DoxyItemize}


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em s} & User message displayed before the error message\\
\hline
\end{DoxyParams}
\begin{DoxySeeAlso}{See also}
\hyperlink{posix_8c_a76ebfe24a40210e5935998c1fa86d3a0}{sys\+\_\+errlist}\mbox{[}\mbox{]}. 
\end{DoxySeeAlso}
\begin{DoxyReturn}{Returns}
void. 
\end{DoxyReturn}


Definition at line 454 of file posix.\+c.



Referenced by escape(), and send\+\_\+message().

\index{posix.\+c@{posix.\+c}!posix\+\_\+fopen\+\_\+modes\+\_\+to\+\_\+open@{posix\+\_\+fopen\+\_\+modes\+\_\+to\+\_\+open}}
\index{posix\+\_\+fopen\+\_\+modes\+\_\+to\+\_\+open@{posix\+\_\+fopen\+\_\+modes\+\_\+to\+\_\+open}!posix.\+c@{posix.\+c}}
\subsubsection[{\texorpdfstring{posix\+\_\+fopen\+\_\+modes\+\_\+to\+\_\+open(const char $\ast$mode)}{posix_fopen_modes_to_open(const char *mode)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf M\+E\+M\+S\+P\+A\+CE} int posix\+\_\+fopen\+\_\+modes\+\_\+to\+\_\+open (
\begin{DoxyParamCaption}
\item[{const char $\ast$}]{mode}
\end{DoxyParamCaption}
)}\hypertarget{posix_8c_a607feb06d296e0ff60d5a19538bd17fc}{}\label{posix_8c_a607feb06d296e0ff60d5a19538bd17fc}


Convert P\+O\+S\+IX fopen mode to P\+O\+S\+IX open mode flags. 


\begin{DoxyItemize}
\item man page fopen (3).
\item man page open (2).
\item Valid modes.
\item Read
\begin{DoxyItemize}
\item \char`\"{}r\char`\"{}, \char`\"{}rb\char`\"{}
\end{DoxyItemize}
\item Read and Write
\begin{DoxyItemize}
\item \char`\"{}r+\char`\"{}, \char`\"{}r+b\char`\"{}, \char`\"{}rb+\char`\"{}
\end{DoxyItemize}
\item Write
\begin{DoxyItemize}
\item \char`\"{}w\char`\"{}, \char`\"{}wb\char`\"{}
\end{DoxyItemize}
\item Write and Read.
\begin{DoxyItemize}
\item \char`\"{}w+\char`\"{}, \char`\"{}w+b\char`\"{}, \char`\"{}wb+\char`\"{}
\item \char`\"{}w+\char`\"{} implies write/read access.
\end{DoxyItemize}
\item Append
\begin{DoxyItemize}
\item \char`\"{}a\char`\"{}, \char`\"{}ab\char`\"{}
\end{DoxyItemize}
\item Append and Read
\begin{DoxyItemize}
\item \char`\"{}a+\char`\"{}, \char`\"{}a+b\char`\"{}, \char`\"{}ab+\char`\"{}
\end{DoxyItemize}
\item Note\+: O\+R\+D\+ER IS I\+M\+P\+O\+R\+T\+A\+N\+T! so w+ is N\+OT the same as r+.
\item A\+L\+W\+A\+YS do a fflush or fseek between rear write operations if + is used..
\end{DoxyItemize}


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em mode} & P\+O\+S\+IX file mode string.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
open mode flags. 

-\/1 on error. 
\end{DoxyReturn}
\begin{DoxyWarning}{Warning}
read and write B\+O\+TH share the same stream buffer and buffer index pointers. 
\end{DoxyWarning}


Definition at line 606 of file posix.\+c.



Referenced by fopen().

\index{posix.\+c@{posix.\+c}!read@{read}}
\index{read@{read}!posix.\+c@{posix.\+c}}
\subsubsection[{\texorpdfstring{read(int fd, const void $\ast$buf, size\+\_\+t count)}{read(int fd, const void *buf, size_t count)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf M\+E\+M\+S\+P\+A\+CE} {\bf ssize\+\_\+t} read (
\begin{DoxyParamCaption}
\item[{int}]{fd, }
\item[{const void $\ast$}]{buf, }
\item[{size\+\_\+t}]{count}
\end{DoxyParamCaption}
)}\hypertarget{posix_8c_af104a2c05bef787e54c6925616e867df}{}\label{posix_8c_af104a2c05bef787e54c6925616e867df}


P\+O\+S\+IX read count bytes from $\ast$buf to fileno fd. 


\begin{DoxyItemize}
\item man page read (2).
\end{DoxyItemize}


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em fd} & P\+O\+S\+IX fileno. \\
\hline
\mbox{\tt in}  & {\em buf} & buffer. \\
\hline
\mbox{\tt in}  & {\em count} & number of bytes to write.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
count on sucess. 

-\/1 on error with errno set. 
\end{DoxyReturn}


Definition at line 1179 of file posix.\+c.



Referenced by fread(), rx\+\_\+fifo\+\_\+read(), and send\+\_\+message().

\index{posix.\+c@{posix.\+c}!rename@{rename}}
\index{rename@{rename}!posix.\+c@{posix.\+c}}
\subsubsection[{\texorpdfstring{rename(const char $\ast$oldpath, const char $\ast$newpath)}{rename(const char *oldpath, const char *newpath)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf M\+E\+M\+S\+P\+A\+CE} int rename (
\begin{DoxyParamCaption}
\item[{const char $\ast$}]{oldpath, }
\item[{const char $\ast$}]{newpath}
\end{DoxyParamCaption}
)}\hypertarget{posix_8c_ada8cc8f9394cf54db8f338838a9fa7ce}{}\label{posix_8c_ada8cc8f9394cf54db8f338838a9fa7ce}


P\+O\+S\+IX rename a file by name. 


\begin{DoxyItemize}
\item man page (2).
\end{DoxyItemize}


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em oldpath} & original name. \\
\hline
\mbox{\tt in}  & {\em newpath} & new name.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 on success. 

-\/1 on error with errno set. 
\end{DoxyReturn}


Definition at line 1696 of file posix.\+c.

\index{posix.\+c@{posix.\+c}!rewind@{rewind}}
\index{rewind@{rewind}!posix.\+c@{posix.\+c}}
\subsubsection[{\texorpdfstring{rewind(\+F\+I\+L\+E $\ast$stream)}{rewind(FILE *stream)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf M\+E\+M\+S\+P\+A\+CE} void rewind (
\begin{DoxyParamCaption}
\item[{F\+I\+LE $\ast$}]{stream}
\end{DoxyParamCaption}
)}\hypertarget{posix_8c_a35e6a58f44d4651951ecfeb97f369884}{}\label{posix_8c_a35e6a58f44d4651951ecfeb97f369884}


P\+O\+S\+IX rewind file to the beginning. 


\begin{DoxyItemize}
\item man page rewind (3).
\end{DoxyItemize}


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em stream} & P\+O\+S\+IX file stream.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
void. 
\end{DoxyReturn}


Definition at line 1350 of file posix.\+c.

\index{posix.\+c@{posix.\+c}!rmdir@{rmdir}}
\index{rmdir@{rmdir}!posix.\+c@{posix.\+c}}
\subsubsection[{\texorpdfstring{rmdir(const char $\ast$pathname)}{rmdir(const char *pathname)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf M\+E\+M\+S\+P\+A\+CE} int rmdir (
\begin{DoxyParamCaption}
\item[{const char $\ast$}]{pathname}
\end{DoxyParamCaption}
)}\hypertarget{posix_8c_a6080dee579486f132062435577b77d10}{}\label{posix_8c_a6080dee579486f132062435577b77d10}


P\+O\+S\+IX delete a directory. 


\begin{DoxyItemize}
\item man page rmdir (2).
\end{DoxyItemize}


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em pathname} & directory to delete.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 on sucess. 

-\/1 on error with errno set. 
\end{DoxyReturn}


Definition at line 1423 of file posix.\+c.

\index{posix.\+c@{posix.\+c}!stat@{stat}}
\index{stat@{stat}!posix.\+c@{posix.\+c}}
\subsubsection[{\texorpdfstring{stat(char $\ast$name, struct stat $\ast$buf)}{stat(char *name, struct stat *buf)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf M\+E\+M\+S\+P\+A\+CE} int {\bf stat} (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{name, }
\item[{struct {\bf stat} $\ast$}]{buf}
\end{DoxyParamCaption}
)}\hypertarget{posix_8c_abef70bf7a4af8a1f4998db0035c51781}{}\label{posix_8c_abef70bf7a4af8a1f4998db0035c51781}


P\+O\+S\+IX stat -\/ get file status of named file. 


\begin{DoxyItemize}
\item man page (2).
\end{DoxyItemize}


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em name} & file name. \\
\hline
\mbox{\tt in}  & {\em buf} & struct stat buffer to return results in.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 on success. 

-\/1 on error with errno set. 
\end{DoxyReturn}


Definition at line 1583 of file posix.\+c.



Referenced by f\+\_\+getfree(), f\+\_\+mkfs(), find\+\_\+volume(), main(), and mmc\+\_\+test().

\index{posix.\+c@{posix.\+c}!strerror@{strerror}}
\index{strerror@{strerror}!posix.\+c@{posix.\+c}}
\subsubsection[{\texorpdfstring{strerror(int errnum)}{strerror(int errnum)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf M\+E\+M\+S\+P\+A\+CE} char$\ast$ strerror (
\begin{DoxyParamCaption}
\item[{int}]{errnum}
\end{DoxyParamCaption}
)}\hypertarget{posix_8c_abf72a013f9f9c7d75ea029f1ed377361}{}\label{posix_8c_abf72a013f9f9c7d75ea029f1ed377361}


P\+O\+S\+IX \hyperlink{posix_8c_abf72a013f9f9c7d75ea029f1ed377361}{strerror()} -\/ convert P\+O\+S\+IX errno to text with user message. 


\begin{DoxyItemize}
\item man page strerror (3).
\end{DoxyItemize}


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em errnum} & index for sys\+\_\+errlist\mbox{[}\mbox{]}\\
\hline
\end{DoxyParams}
\begin{DoxySeeAlso}{See also}
\hyperlink{posix_8c_a76ebfe24a40210e5935998c1fa86d3a0}{sys\+\_\+errlist}\mbox{[}\mbox{]}. 
\end{DoxySeeAlso}
\begin{DoxyReturn}{Returns}
char $\ast$ 
\end{DoxyReturn}


Definition at line 480 of file posix.\+c.

\index{posix.\+c@{posix.\+c}!strerror\+\_\+r@{strerror\+\_\+r}}
\index{strerror\+\_\+r@{strerror\+\_\+r}!posix.\+c@{posix.\+c}}
\subsubsection[{\texorpdfstring{strerror\+\_\+r(int errnum, char $\ast$buf, size\+\_\+t buflen)}{strerror_r(int errnum, char *buf, size_t buflen)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf M\+E\+M\+S\+P\+A\+CE} char$\ast$ strerror\+\_\+r (
\begin{DoxyParamCaption}
\item[{int}]{errnum, }
\item[{char $\ast$}]{buf, }
\item[{size\+\_\+t}]{buflen}
\end{DoxyParamCaption}
)}\hypertarget{posix_8c_a6311c6b29216455ec9b716b9eb31c799}{}\label{posix_8c_a6311c6b29216455ec9b716b9eb31c799}


P\+O\+S\+IX \hyperlink{posix_8c_a6311c6b29216455ec9b716b9eb31c799}{strerror\+\_\+r()} -\/ convert P\+O\+S\+IX errno to text with user message. 


\begin{DoxyItemize}
\item man page strerror (3).
\end{DoxyItemize}


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em errnum} & index for sys\+\_\+errlist\mbox{[}\mbox{]} \\
\hline
\mbox{\tt in}  & {\em buf} & user buffer for error message \\
\hline
\mbox{\tt in}  & {\em buflen} & length of user buffer for error message\\
\hline
\end{DoxyParams}
\begin{DoxySeeAlso}{See also}
\hyperlink{posix_8c_a76ebfe24a40210e5935998c1fa86d3a0}{sys\+\_\+errlist}\mbox{[}\mbox{]}. 
\end{DoxySeeAlso}
\begin{DoxyReturn}{Returns}
char $\ast$ 
\end{DoxyReturn}


Definition at line 496 of file posix.\+c.

\index{posix.\+c@{posix.\+c}!sync@{sync}}
\index{sync@{sync}!posix.\+c@{posix.\+c}}
\subsubsection[{\texorpdfstring{sync(void)}{sync(void)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf M\+E\+M\+S\+P\+A\+CE} void sync (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}\hypertarget{posix_8c_a8f7f00d4ec0d99440762b0a664aebf70}{}\label{posix_8c_a8f7f00d4ec0d99440762b0a664aebf70}


P\+O\+S\+IX Sync all pending file changes and metadata on A\+LL files. 


\begin{DoxyItemize}
\item man page sync (2).
\end{DoxyItemize}

\begin{DoxyReturn}{Returns}
void. 
\end{DoxyReturn}


Definition at line 1057 of file posix.\+c.

\index{posix.\+c@{posix.\+c}!syncfs@{syncfs}}
\index{syncfs@{syncfs}!posix.\+c@{posix.\+c}}
\subsubsection[{\texorpdfstring{syncfs(int fd)}{syncfs(int fd)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf M\+E\+M\+S\+P\+A\+CE} int syncfs (
\begin{DoxyParamCaption}
\item[{int}]{fd}
\end{DoxyParamCaption}
)}\hypertarget{posix_8c_a521c33bdb3606c9f3546b9cbcd37b9ac}{}\label{posix_8c_a521c33bdb3606c9f3546b9cbcd37b9ac}


P\+O\+S\+IX Sync pending file changes and metadata for specified fileno. 


\begin{DoxyItemize}
\item man page syncfs (2).
\end{DoxyItemize}


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em fd} & P\+O\+S\+IX fileno to sync. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0. 

-\/1 on error witrh errno set. 
\end{DoxyReturn}


Definition at line 1020 of file posix.\+c.



Referenced by sync().

\index{posix.\+c@{posix.\+c}!truncate@{truncate}}
\index{truncate@{truncate}!posix.\+c@{posix.\+c}}
\subsubsection[{\texorpdfstring{truncate(const char $\ast$path, off\+\_\+t length)}{truncate(const char *path, off_t length)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf M\+E\+M\+S\+P\+A\+CE} int truncate (
\begin{DoxyParamCaption}
\item[{const char $\ast$}]{path, }
\item[{{\bf off\+\_\+t}}]{length}
\end{DoxyParamCaption}
)}\hypertarget{posix_8c_a73a95c4a93875be906e573c00b30c5ea}{}\label{posix_8c_a73a95c4a93875be906e573c00b30c5ea}


P\+O\+S\+IX truncate named file to length. 


\begin{DoxyItemize}
\item man page truncate (2).
\end{DoxyItemize}


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em path} & file name to truncate. \\
\hline
\mbox{\tt in}  & {\em length} & length to truncate to.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 on sucess. 

-\/1 n fail. 
\end{DoxyReturn}


Definition at line 1514 of file posix.\+c.

\index{posix.\+c@{posix.\+c}!unlink@{unlink}}
\index{unlink@{unlink}!posix.\+c@{posix.\+c}}
\subsubsection[{\texorpdfstring{unlink(const char $\ast$pathname)}{unlink(const char *pathname)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf M\+E\+M\+S\+P\+A\+CE} int unlink (
\begin{DoxyParamCaption}
\item[{const char $\ast$}]{pathname}
\end{DoxyParamCaption}
)}\hypertarget{posix_8c_aa964d662c19b2021d9cfd0c71bc686bd}{}\label{posix_8c_aa964d662c19b2021d9cfd0c71bc686bd}


P\+O\+S\+IX delete a file. 


\begin{DoxyItemize}
\item man page unlink (2).
\end{DoxyItemize}


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em pathname} & filename to delete.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 on sucess. 

-\/1 on error with errno set. 
\end{DoxyReturn}


Definition at line 1401 of file posix.\+c.

\index{posix.\+c@{posix.\+c}!write@{write}}
\index{write@{write}!posix.\+c@{posix.\+c}}
\subsubsection[{\texorpdfstring{write(int fd, const void $\ast$buf, size\+\_\+t count)}{write(int fd, const void *buf, size_t count)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf M\+E\+M\+S\+P\+A\+CE} {\bf ssize\+\_\+t} write (
\begin{DoxyParamCaption}
\item[{int}]{fd, }
\item[{const void $\ast$}]{buf, }
\item[{size\+\_\+t}]{count}
\end{DoxyParamCaption}
)}\hypertarget{posix_8c_a072435300ac99e8d7c3749f45166e797}{}\label{posix_8c_a072435300ac99e8d7c3749f45166e797}


P\+O\+S\+IX Write count bytes from $\ast$buf to fileno fd. 


\begin{DoxyItemize}
\item man page write (2).
\end{DoxyItemize}


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em fd} & P\+O\+S\+IX fileno. \\
\hline
\mbox{\tt in}  & {\em buf} & buffer. \\
\hline
\mbox{\tt in}  & {\em count} & number of bytes to write. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
count on sucess. 

-\/1 on error with errno set. 
\end{DoxyReturn}


Definition at line 1106 of file posix.\+c.



Referenced by fwrite(), and send\+\_\+message().



\subsection{Variable Documentation}
\index{posix.\+c@{posix.\+c}!\+\_\+\+\_\+iob@{\+\_\+\+\_\+iob}}
\index{\+\_\+\+\_\+iob@{\+\_\+\+\_\+iob}!posix.\+c@{posix.\+c}}
\subsubsection[{\texorpdfstring{\+\_\+\+\_\+iob}{__iob}}]{\setlength{\rightskip}{0pt plus 5cm}F\+I\+LE$\ast$ \+\_\+\+\_\+iob\mbox{[}{\bf M\+A\+X\+\_\+\+F\+I\+L\+ES}\mbox{]}}\hypertarget{posix_8c_aae2f027325f7e73c3aa5e7dc990bd90d}{}\label{posix_8c_aae2f027325f7e73c3aa5e7dc990bd90d}


P\+O\+S\+IX fileno to P\+O\+S\+IX F\+I\+LE stream table. 


\begin{DoxyItemize}
\item Note\+: the index of \+\_\+\+\_\+iob\mbox{[}\mbox{]} is reffered to \char`\"{}fileno\char`\"{}.
\item Reference\+: libc/avr-\/libc-\/1.\+8.\+0/libc/stdio.
\item stdin = \+\_\+\+\_\+iob\mbox{[}0\mbox{]}.
\item \+\_\+\+\_\+iob\mbox{[}1\mbox{]} = stdout.
\item \+\_\+\+\_\+iob\mbox{[}2\mbox{]} = stderr. 
\end{DoxyItemize}

Definition at line 83 of file posix.\+c.



Referenced by fatfs\+\_\+to\+\_\+fileno(), fileno(), fileno\+\_\+to\+\_\+stream(), free\+\_\+file\+\_\+descriptor(), new\+\_\+file\+\_\+descriptor(), read(), and write().

\index{posix.\+c@{posix.\+c}!errno@{errno}}
\index{errno@{errno}!posix.\+c@{posix.\+c}}
\subsubsection[{\texorpdfstring{errno}{errno}}]{\setlength{\rightskip}{0pt plus 5cm}int errno}\hypertarget{posix_8c_ad65a8842cc674e3ddf69355898c0ecbf}{}\label{posix_8c_ad65a8842cc674e3ddf69355898c0ecbf}


Note\+: fdevopen assigns stdin,stdout,stderr. 

P\+O\+S\+IX errno. 

Definition at line 71 of file posix.\+c.



Referenced by close(), fatfs\+\_\+getc(), fatfs\+\_\+putc(), fatfs\+\_\+scan\+\_\+files(), fatfs\+\_\+to\+\_\+fileno(), fileno(), fileno\+\_\+to\+\_\+fatfs(), fileno\+\_\+to\+\_\+stream(), free\+\_\+file\+\_\+descriptor(), ftell(), ftruncate(), lseek(), mctime(), new\+\_\+file\+\_\+descriptor(), open(), perror(), read(), rename(), rmdir(), stat(), syncfs(), truncate(), unlink(), and write().

\index{posix.\+c@{posix.\+c}!sys\+\_\+errlist@{sys\+\_\+errlist}}
\index{sys\+\_\+errlist@{sys\+\_\+errlist}!posix.\+c@{posix.\+c}}
\subsubsection[{\texorpdfstring{sys\+\_\+errlist}{sys_errlist}}]{\setlength{\rightskip}{0pt plus 5cm}const char$\ast$ sys\+\_\+errlist\mbox{[}$\,$\mbox{]}}\hypertarget{posix_8c_a76ebfe24a40210e5935998c1fa86d3a0}{}\label{posix_8c_a76ebfe24a40210e5935998c1fa86d3a0}


P\+O\+S\+IX error messages for each errno value. 


\begin{DoxyItemize}
\item man page errno (3) 
\end{DoxyItemize}

Definition at line 88 of file posix.\+c.



Referenced by perror(), strerror(), and strerror\+\_\+r().

