\hypertarget{adf4351_8c}{}\section{adf4351/adf4351.c File Reference}
\label{adf4351_8c}\index{adf4351/adf4351.\+c@{adf4351/adf4351.\+c}}
{\ttfamily \#include \char`\"{}adf4351\+\_\+hal.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}adf4351.\+h\char`\"{}}\\*
{\ttfamily \#include $<$math.\+h$>$}\\*
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{user__config_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE} void \hyperlink{adf4351_8c_ae9bac3466244b1cf1c43de60bfa88bf3}{A\+D\+F4351\+\_\+sync} (int all)
\begin{DoxyCompactList}\small\item\em Sync settings to A\+D\+F4351 registers. \end{DoxyCompactList}\item 
\hyperlink{user__config_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE} \hyperlink{send_8c_a435d1572bf3f880d55459d9805097f62}{uint32\+\_\+t} \hyperlink{adf4351_8c_a4efaed51690f11a55c140c3a576c77ba}{A\+D\+F4351\+\_\+\+Get\+Reg32} (int addr)
\begin{DoxyCompactList}\small\item\em Returns 32bit register value from register buffer. \end{DoxyCompactList}\item 
\hyperlink{user__config_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE} int \hyperlink{adf4351_8c_a324309e3155806af38a6140b8543d39c}{A\+D\+F4351\+\_\+\+C\+H\+A\+R\+G\+E\+\_\+\+P\+U\+M\+P\+\_\+uA} (\hyperlink{earth2wireframe_8c_a32f2e37ee053cf2ce8ca28d1f74630e5}{int32\+\_\+t} x)
\begin{DoxyCompactList}\small\item\em Convert charge pump current in uA to R2 register value. \end{DoxyCompactList}\item 
\hyperlink{user__config_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE} void \hyperlink{adf4351_8c_a50bcc9731b52a04b7605cea7a7b9b31d}{A\+D\+F4351\+\_\+\+Init} (void)
\begin{DoxyCompactList}\small\item\em Init all A\+D\+F4351 registers to default values. \end{DoxyCompactList}\item 
\hyperlink{user__config_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE} \hyperlink{send_8c_a435d1572bf3f880d55459d9805097f62}{uint32\+\_\+t} \hyperlink{adf4351_8c_a4880c809bea1b2745d82d735d2e10cbc}{A\+D\+F4351\+\_\+status} (\hyperlink{send_8c_aba7bc1797add20fe3efdf37ced1182c5}{uint8\+\_\+t} mode)
\begin{DoxyCompactList}\small\item\em Read A\+D\+F4351 status Only of value if spi bus input is tied to mux out This function has not been tested! \end{DoxyCompactList}\item 
\hyperlink{user__config_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE} \hyperlink{send_8c_a435d1572bf3f880d55459d9805097f62}{uint32\+\_\+t} \hyperlink{adf4351_8c_a9eccb6b9d9f10c6286ae277a6b8ef9ae}{A\+D\+F4351\+\_\+\+G\+C\+D32} (\hyperlink{send_8c_a435d1572bf3f880d55459d9805097f62}{uint32\+\_\+t} u, \hyperlink{send_8c_a435d1572bf3f880d55459d9805097f62}{uint32\+\_\+t} v)
\begin{DoxyCompactList}\small\item\em Return the G\+CD of two unsifned 32bit numbers. \end{DoxyCompactList}\item 
\hyperlink{user__config_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE} \hyperlink{user__config_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE} double \hyperlink{adf4351_8c_af4002a973f20e97d67069f506a08fa4e}{A\+D\+F4351\+\_\+\+P\+FD} (double R\+E\+Fin, int R)
\begin{DoxyCompactList}\small\item\em Compute P\+FD. \end{DoxyCompactList}\item 
\hyperlink{user__config_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE} void \hyperlink{adf4351_8c_a992aef229e9dba29e333afd297fe9c45}{A\+D\+F4351\+\_\+display\+\_\+error} (int error)
\begin{DoxyCompactList}\small\item\em Verbose Error messages. \end{DoxyCompactList}\item 
\hyperlink{user__config_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE} int \hyperlink{adf4351_8c_aa81dc41f60eb1698b3866deb0d2a31bc}{A\+D\+F4351\+\_\+\+Config} (double R\+Fout, double R\+E\+Fin, double Channel\+Spacing, double $\ast$R\+Fout\+Calc)
\begin{DoxyCompactList}\small\item\em Calculate register values for A\+D\+F4351. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\hyperlink{structadf4351__regs__t}{adf4351\+\_\+regs\+\_\+t} \hyperlink{adf4351_8c_a70530166ec574157a09a77a51c01ea02}{regs}
\begin{DoxyCompactList}\small\item\em A\+D\+F4351 register buffer. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Function Documentation}
\index{adf4351.\+c@{adf4351.\+c}!A\+D\+F4351\+\_\+\+C\+H\+A\+R\+G\+E\+\_\+\+P\+U\+M\+P\+\_\+uA@{A\+D\+F4351\+\_\+\+C\+H\+A\+R\+G\+E\+\_\+\+P\+U\+M\+P\+\_\+uA}}
\index{A\+D\+F4351\+\_\+\+C\+H\+A\+R\+G\+E\+\_\+\+P\+U\+M\+P\+\_\+uA@{A\+D\+F4351\+\_\+\+C\+H\+A\+R\+G\+E\+\_\+\+P\+U\+M\+P\+\_\+uA}!adf4351.\+c@{adf4351.\+c}}
\subsubsection[{\texorpdfstring{A\+D\+F4351\+\_\+\+C\+H\+A\+R\+G\+E\+\_\+\+P\+U\+M\+P\+\_\+u\+A(int32\+\_\+t x)}{ADF4351_CHARGE_PUMP_uA(int32_t x)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf M\+E\+M\+S\+P\+A\+CE} int A\+D\+F4351\+\_\+\+C\+H\+A\+R\+G\+E\+\_\+\+P\+U\+M\+P\+\_\+uA (
\begin{DoxyParamCaption}
\item[{{\bf int32\+\_\+t}}]{x}
\end{DoxyParamCaption}
)}\hypertarget{adf4351_8c_a324309e3155806af38a6140b8543d39c}{}\label{adf4351_8c_a324309e3155806af38a6140b8543d39c}


Convert charge pump current in uA to R2 register value. 


\begin{DoxyParams}{Parameters}
{\em none} & \\
\hline
\end{DoxyParams}


Definition at line 135 of file adf4351.\+c.



Referenced by A\+D\+F4351\+\_\+\+Init().

\index{adf4351.\+c@{adf4351.\+c}!A\+D\+F4351\+\_\+\+Config@{A\+D\+F4351\+\_\+\+Config}}
\index{A\+D\+F4351\+\_\+\+Config@{A\+D\+F4351\+\_\+\+Config}!adf4351.\+c@{adf4351.\+c}}
\subsubsection[{\texorpdfstring{A\+D\+F4351\+\_\+\+Config(double R\+Fout, double R\+E\+Fin, double Channel\+Spacing, double $\ast$\+R\+Fout\+Calc)}{ADF4351_Config(double RFout, double REFin, double ChannelSpacing, double *RFoutCalc)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf M\+E\+M\+S\+P\+A\+CE} int A\+D\+F4351\+\_\+\+Config (
\begin{DoxyParamCaption}
\item[{double}]{R\+Fout, }
\item[{double}]{R\+E\+Fin, }
\item[{double}]{Channel\+Spacing, }
\item[{double $\ast$}]{R\+Fout\+Calc}
\end{DoxyParamCaption}
)}\hypertarget{adf4351_8c_aa81dc41f60eb1698b3866deb0d2a31bc}{}\label{adf4351_8c_aa81dc41f60eb1698b3866deb0d2a31bc}


Calculate register values for A\+D\+F4351. 


\begin{DoxyParams}{Parameters}
{\em R\+Fout} & Required output frequency in Hz \\
\hline
{\em R\+E\+Fin} & Reference clock in Hz \\
\hline
{\em Spacing} & Output channel spacing in Hz  R\+Fout\+Calc\+: Calculated actual output frequency in Hz \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Return values}
{\em 0=\+OK,or} & Error code \\
\hline
\end{DoxyRetVals}
R\+Fout\+V\+CO = \mbox{[}r0\+\_\+\+I\+NT + (r0\+\_\+\+F\+R\+A\+C/r1\+\_\+\+M\+OD)\mbox{]} × (P\+FD) R\+Fout = \mbox{[}r0\+\_\+\+I\+NT + (r0\+\_\+\+F\+R\+A\+C/r1\+\_\+\+M\+OD)\mbox{]} × (P\+FD /\+R\+Fout\+D\+IV) R\+Fout is the RF frequency output. r0\+\_\+\+I\+NT is the integer division factor. r0\+\_\+\+F\+R\+AC is the numerator of the fractional division (0 to M\+OD − 1). r1\+\_\+\+M\+OD is the preset fractional modulus (2 to 4095). R\+Fout\+D\+IV is the V\+CO output divider. P\+FD = R\+E\+Fin × \mbox{[}(1 + R\+E\+Fin\+M\+U\+L2)/(R × (1 + R\+E\+Fin\+D\+I\+V2))\mbox{]} R\+E\+Fin is the reference frequency input. R\+E\+Fin\+M\+U\+L2 is the R\+E\+Fin doubler bit (0 or 1). r2\+\_\+R is R\+E\+Fin division factor (1 to 1023). R\+E\+Fin\+D\+I\+V2 is the reference divide-\/by-\/2 bit (0 or 1). Fres = Channel\+Spacing $\ast$ R\+Fout\+D\+IV r1\+\_\+\+M\+OD=R\+E\+Fin / Fres

Definition at line 412 of file adf4351.\+c.



Referenced by user\+\_\+tests().

\index{adf4351.\+c@{adf4351.\+c}!A\+D\+F4351\+\_\+display\+\_\+error@{A\+D\+F4351\+\_\+display\+\_\+error}}
\index{A\+D\+F4351\+\_\+display\+\_\+error@{A\+D\+F4351\+\_\+display\+\_\+error}!adf4351.\+c@{adf4351.\+c}}
\subsubsection[{\texorpdfstring{A\+D\+F4351\+\_\+display\+\_\+error(int error)}{ADF4351_display_error(int error)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf M\+E\+M\+S\+P\+A\+CE} void A\+D\+F4351\+\_\+display\+\_\+error (
\begin{DoxyParamCaption}
\item[{int}]{error}
\end{DoxyParamCaption}
)}\hypertarget{adf4351_8c_a992aef229e9dba29e333afd297fe9c45}{}\label{adf4351_8c_a992aef229e9dba29e333afd297fe9c45}


Verbose Error messages. 

Display A\+D\+F4351 error return code 
\begin{DoxyParams}{Parameters}
{\em error} & error code \\
\hline
\end{DoxyParams}


Definition at line 380 of file adf4351.\+c.



Referenced by user\+\_\+tests().

\index{adf4351.\+c@{adf4351.\+c}!A\+D\+F4351\+\_\+\+G\+C\+D32@{A\+D\+F4351\+\_\+\+G\+C\+D32}}
\index{A\+D\+F4351\+\_\+\+G\+C\+D32@{A\+D\+F4351\+\_\+\+G\+C\+D32}!adf4351.\+c@{adf4351.\+c}}
\subsubsection[{\texorpdfstring{A\+D\+F4351\+\_\+\+G\+C\+D32(uint32\+\_\+t u, uint32\+\_\+t v)}{ADF4351_GCD32(uint32_t u, uint32_t v)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf M\+E\+M\+S\+P\+A\+CE} {\bf uint32\+\_\+t} A\+D\+F4351\+\_\+\+G\+C\+D32 (
\begin{DoxyParamCaption}
\item[{{\bf uint32\+\_\+t}}]{u, }
\item[{{\bf uint32\+\_\+t}}]{v}
\end{DoxyParamCaption}
)}\hypertarget{adf4351_8c_a9eccb6b9d9f10c6286ae277a6b8ef9ae}{}\label{adf4351_8c_a9eccb6b9d9f10c6286ae277a6b8ef9ae}


Return the G\+CD of two unsifned 32bit numbers. 


\begin{DoxyParams}{Parameters}
{\em u} & first number \\
\hline
{\em v} & second number \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
G\+CD of u and v 
\end{DoxyReturn}


Definition at line 320 of file adf4351.\+c.



Referenced by A\+D\+F4351\+\_\+\+Config().

\index{adf4351.\+c@{adf4351.\+c}!A\+D\+F4351\+\_\+\+Get\+Reg32@{A\+D\+F4351\+\_\+\+Get\+Reg32}}
\index{A\+D\+F4351\+\_\+\+Get\+Reg32@{A\+D\+F4351\+\_\+\+Get\+Reg32}!adf4351.\+c@{adf4351.\+c}}
\subsubsection[{\texorpdfstring{A\+D\+F4351\+\_\+\+Get\+Reg32(int addr)}{ADF4351_GetReg32(int addr)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf M\+E\+M\+S\+P\+A\+CE} {\bf uint32\+\_\+t} A\+D\+F4351\+\_\+\+Get\+Reg32 (
\begin{DoxyParamCaption}
\item[{int}]{addr}
\end{DoxyParamCaption}
)}\hypertarget{adf4351_8c_a4efaed51690f11a55c140c3a576c77ba}{}\label{adf4351_8c_a4efaed51690f11a55c140c3a576c77ba}


Returns 32bit register value from register buffer. 

\subsection*{============================================================= }


\begin{DoxyParams}{Parameters}
{\em addr} & Register address \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Return values}
{\em register} & value \\
\hline
\end{DoxyRetVals}


Definition at line 64 of file adf4351.\+c.



Referenced by A\+D\+F4351\+\_\+status(), and A\+D\+F4351\+\_\+sync().

\index{adf4351.\+c@{adf4351.\+c}!A\+D\+F4351\+\_\+\+Init@{A\+D\+F4351\+\_\+\+Init}}
\index{A\+D\+F4351\+\_\+\+Init@{A\+D\+F4351\+\_\+\+Init}!adf4351.\+c@{adf4351.\+c}}
\subsubsection[{\texorpdfstring{A\+D\+F4351\+\_\+\+Init(void)}{ADF4351_Init(void)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf M\+E\+M\+S\+P\+A\+CE} void A\+D\+F4351\+\_\+\+Init (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}\hypertarget{adf4351_8c_a50bcc9731b52a04b7605cea7a7b9b31d}{}\label{adf4351_8c_a50bcc9731b52a04b7605cea7a7b9b31d}


Init all A\+D\+F4351 registers to default values. 


\begin{DoxyParams}{Parameters}
{\em none} & \\
\hline
\end{DoxyParams}


Definition at line 153 of file adf4351.\+c.



Referenced by setup().

\index{adf4351.\+c@{adf4351.\+c}!A\+D\+F4351\+\_\+\+P\+FD@{A\+D\+F4351\+\_\+\+P\+FD}}
\index{A\+D\+F4351\+\_\+\+P\+FD@{A\+D\+F4351\+\_\+\+P\+FD}!adf4351.\+c@{adf4351.\+c}}
\subsubsection[{\texorpdfstring{A\+D\+F4351\+\_\+\+P\+F\+D(double R\+E\+Fin, int R)}{ADF4351_PFD(double REFin, int R)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf M\+E\+M\+S\+P\+A\+CE} {\bf M\+E\+M\+S\+P\+A\+CE} double A\+D\+F4351\+\_\+\+P\+FD (
\begin{DoxyParamCaption}
\item[{double}]{R\+E\+Fin, }
\item[{int}]{R}
\end{DoxyParamCaption}
)}\hypertarget{adf4351_8c_af4002a973f20e97d67069f506a08fa4e}{}\label{adf4351_8c_af4002a973f20e97d67069f506a08fa4e}


Compute P\+FD. 


\begin{DoxyParams}{Parameters}
{\em R\+E\+Fin} & Reference in frequency \\
\hline
{\em R} & Reference divider \\
\hline
\end{DoxyParams}


Definition at line 346 of file adf4351.\+c.



Referenced by A\+D\+F4351\+\_\+\+Config().

\index{adf4351.\+c@{adf4351.\+c}!A\+D\+F4351\+\_\+status@{A\+D\+F4351\+\_\+status}}
\index{A\+D\+F4351\+\_\+status@{A\+D\+F4351\+\_\+status}!adf4351.\+c@{adf4351.\+c}}
\subsubsection[{\texorpdfstring{A\+D\+F4351\+\_\+status(uint8\+\_\+t mode)}{ADF4351_status(uint8_t mode)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf M\+E\+M\+S\+P\+A\+CE} {\bf uint32\+\_\+t} A\+D\+F4351\+\_\+status (
\begin{DoxyParamCaption}
\item[{{\bf uint8\+\_\+t}}]{mode}
\end{DoxyParamCaption}
)}\hypertarget{adf4351_8c_a4880c809bea1b2745d82d735d2e10cbc}{}\label{adf4351_8c_a4880c809bea1b2745d82d735d2e10cbc}


Read A\+D\+F4351 status Only of value if spi bus input is tied to mux out This function has not been tested! 


\begin{DoxyParams}{Parameters}
{\em mode} & muxout mode \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
32bit result 
\end{DoxyReturn}


Definition at line 295 of file adf4351.\+c.

\index{adf4351.\+c@{adf4351.\+c}!A\+D\+F4351\+\_\+sync@{A\+D\+F4351\+\_\+sync}}
\index{A\+D\+F4351\+\_\+sync@{A\+D\+F4351\+\_\+sync}!adf4351.\+c@{adf4351.\+c}}
\subsubsection[{\texorpdfstring{A\+D\+F4351\+\_\+sync(int all)}{ADF4351_sync(int all)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf M\+E\+M\+S\+P\+A\+CE} void A\+D\+F4351\+\_\+sync (
\begin{DoxyParamCaption}
\item[{int}]{all}
\end{DoxyParamCaption}
)}\hypertarget{adf4351_8c_ae9bac3466244b1cf1c43de60bfa88bf3}{}\label{adf4351_8c_ae9bac3466244b1cf1c43de60bfa88bf3}


Sync settings to A\+D\+F4351 registers. 

\subsection*{============================================================= }


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em all} & sync all registers \\
\hline
\end{DoxyParams}


Definition at line 42 of file adf4351.\+c.



Referenced by A\+D\+F4351\+\_\+\+Init(), A\+D\+F4351\+\_\+status(), and user\+\_\+tests().



\subsection{Variable Documentation}
\index{adf4351.\+c@{adf4351.\+c}!regs@{regs}}
\index{regs@{regs}!adf4351.\+c@{adf4351.\+c}}
\subsubsection[{\texorpdfstring{regs}{regs}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf adf4351\+\_\+regs\+\_\+t} regs}\hypertarget{adf4351_8c_a70530166ec574157a09a77a51c01ea02}{}\label{adf4351_8c_a70530166ec574157a09a77a51c01ea02}


A\+D\+F4351 register buffer. 



Definition at line 35 of file adf4351.\+c.



Referenced by cal\+\_\+dex\+\_\+dump().

